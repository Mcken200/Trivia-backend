<!DOCTYPE html>
<html>
<head>
  <title>Trivia Game</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
  <body>
    <div id="qrContainer" style="position: fixed; top: 1rem; right: 1rem;"></div>

    <h1>Welcome to the Trivia Game!</h1>
    <p>Connecting to the server...</p>
    <button id="startBtn">Start Game</button>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script>
    window.addEventListener('DOMContentLoaded', () => {
        const socket = io();

        console.log('Connected to server with ID:', socket.id);

      socket.on("host_start_game", (data) => {
        console.log("Received host_start_game on display with data:", data);
        if (data && data.joinUrl) {
          showQRCode(data.joinUrl);
        } else {
          console.warn("No joinUrl in host_start_game payload");
        }
      });
        });

      function showQRCode(joinUrl) {
        console.log("Showing QR code for:", joinUrl);
        const qrCodeContainer = document.getElementById("qrContainer");
        qrCodeContainer.innerHTML = ''; // Clear any previous QR
        new QRCode(qrCodeContainer, {
          text: joinUrl,
          width: 256,
          height: 256
        });
      }
        }
    });
    </script>
  </body>
</html>